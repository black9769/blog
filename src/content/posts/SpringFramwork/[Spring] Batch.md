---
title: "[Spring] Batch"
published: 2024-07-22
description: ''
image: ''
tags: [Spring, Batch, Framework]
category: 'Spring'
draft: false 
---

# 개요
Spring Batch는 대규모 데이터 처리를 위한 강력하고 신뢰할 수 있는 배치 처리 프레임워크입니다. 
주로 기업 환경에서 데이터베이스와 파일 시스템 간의 대규모 데이터를 처리하거나, 복잡한 데이터 변환 및 일괄 처리를 자동화하는 데 사용됩니다.

## 학습하게된 이유
내가 Spring Batch를 사용한 이유는 아래와 같았다.

여태까지 리포팅 서비스를 제공하지 않았지만, 리포팅 서비스의 기획에 맞춰 고객 맞춤형 리포팅 서비스를 제공해야한다.
하지만, 기존의 사용자들은 무시하고 신규 사용자들만 리포팅 서비스를 제공해 주어야하는게 맞는 것일까 라는 비즈니스적 의구심이 들었다.

개발자 업무를 수행하다보면, 이런 이슈를 직면할때가 많다. 새로운 서비스를 도입했는데, 기존 가입자들도 지원해야할까?  

예를 들어보자.

내가 운영중인 온라인하던 쇼핑몰에는 `포인트 정책`이 없었다. 근데 고객유치 및 지속적인 고객 사용량을 늘리기 위해서 `포인트 정책`을
비즈니스 기획이 들어왔다. 그렇다면, 신규 가입자 부터 포인트 정책을 넣을 것인가?

당연히, 아니다. 기존 고객들이 구매한 내역을 확인하여 `포인트 기능`이 정상동작 하도록 해아한다. 물론, 정책과 관련된 부분은 사업모델마다
다르긴 하지만, 내가 하고자 하는 이야기는 `기능이 추가됨에 따라 (구)사용자가 신규 기능에 대한 불이익이 없어`야한다는 이야기이다.

그렇다면, 1만명의 사용자 데이터 전체를 기술적으로 해결할 수 있는 방법이 없을까에 대한 고민을 Spring Batch를 통해 풀어가기로 했다.

## Spring Batch란?

Batch를 먼저 이해해야한다.

> 💡
> 배치 시스템은 일정량의 작업을 모아 일괄적으로 처리하는 컴퓨팅 방식을 의미한다.
> 주로 데이터 처리, 분석, 변환 등의 작업을 대규모로 자동화하여 실행하는 데 사용된다. 
> 이러한 시스템은 실시간 상호작용이 필요 없는 대규모 데이터 작업을 효율적으로 처리하는 데 적합하다.

이런 시스템을 배치 서비스라고 하는데 즉, 한번에 데이터를 `일괄처리`할때 사용해야 한다는 것이다.

### Spring Batch의 구성요소

1. Jobs: `Job은 배치 프로세스의 기본 단위`입니다. 여러 개의 Step으로 구성되며, Job을 통해 전체 배치 작업의 흐름을 정의
2. Step: `Step은 Job의 실행 단위`로, 실제 배치 처리 로직이 포함
   1. ItemReader: `데이터를 읽어오는 역할`을 합니다. 파일, 데이터베이스, 큐 등 다양한 소스에서 데이터를 읽음
   2. ItemProcessor: `읽어온 데이터를 가공하거나 변환하는 역할`을 합니다. 비즈니스 로직을 적용하여 데이터를 처리
   3. ItemWriter: `처리된 데이터를 저장하는 역할`을 합니다. 파일, 데이터베이스 등 다양한 타겟에 데이터 쓰기
3. JobRepository: `Job과 Step의 상태를 저장하고 관리`합니다. Job의 시작, 종료, 실패 상태를 트랜잭션으로 관리하여 배치 작업의 신뢰성을 보장
4. JobLauncher: Job을 실행시키는 역할을 합니다. 특정 시간에 Job을 실행하거나, 특정 이벤트에 따라 `Job을 트리거`
