---
title: OSI 7 Layer
published: 2024-06-14
description: ''
image: ''
tags: ['Network','CS']
category: 'Network'
draft: false 
---

# OSI 7 Layer(OSI 7계층)
- - -
## 소개

네트워크를 학습하다보면 필수적으로 나오는 L1, L2, L3 ··· L6, L7와 같은 용어가 등장합니다.
그리고, 그에 맞춰 "백본 스위치, L7 LB 등등" 여러 네트워크 장비들이 쭈우욱~ 나열되어있습니다.  

이를 위해서는 OSI7 Layer의 구조 이해가 필요합니다. 이번 포스팅에서는 Layer의 이해와 등장하는 용어를 쉽게 설명하고
아키텍쳐 구조에서 네트워크 장비들이 어떻게 사용되는지 찾아보고 알아보도록 합시다.

---
## OSI 7계층
### OSI 7 Layer란?

네트워크를 쉽게 이해하자면, PC간 서버통신, 서버간 서버통신, PC간 PC통신이라고 이해할 수 있습니다. 예를 들어보죠. 
HW를 학습하다보면 SW와 다르게 눈으로 데이터들이 이동하는게 보이지 않습니다. 여러 장비들을 사용해야하죠. 문제는 고장나면 장비나 부품자체를 교체해야한다는 겁니다.
즉, 일체형으로 통신이 이루어지면 도대체 문제가 어디서 생긴지 모른다는 겁니다.  
네트워크가 한개의 라인으로 되어있는데 N:M 구조라면? 고장났을때 모든 회선을 찾을때까지 다 교체를 해줘야합니다. 그래서 OSI 7 Layer가 필요한겁니다.  

돌아가서, OSI 계층은 일종의 네트워크의 표준 모델이라고 합니다.
표준화의 이유는 "네트워크 장비를만드는 회사가 이러한 지침대로 장비를 만들면 다른 회사 장비여도 상호 호환성을 보장"할 수 있기 때문입니다.
그리고, 어떤 계층별로 나눠야 어떤 계층이 고장났을때, 그 계층만 고칠 수 있습니다. 표준화, 유지보수를 포함하여 보안에도 매우 밀접한 관계가 있으니
꼭 OSI 7 Layer는 필수적입니다.  

저는 개인적은 OSI 7 Layer가 네트워크의 80%는 차지하고 있다고 생각합니다. 그래서 매우매우 중요합니다.

![Alt text](/src/assets/images/Network/OSI7Layer.png)
---
## 1계층 - Physcial Layer(물리계층)
- 데이터 구조: Bits(비트)
- 장비: 리피터, 케이블, 허브, 모뎀 등등
- 목적: 사용자 데이터를 물리 매체 상에서 통신이 가능하도록 "전기적 신호로 변환해주는 역할"
- 특징
  1. 물리계층에서 데이터에 대한 오류가 나더라도 복구 불가능  

물리 계층은 OSI 1 계층으로 기본 네트워크 하드웨어 전송 기술을 다루게 된다.  

---
## 2계층 - DataLink Layer(데이터링크 계층)
- 데이터 구조: Frame(프레임)
- 장비: 스위치, 브릿지, MAC주소 테이블
- 목적: 서로 다른 주변 네트워크 장치들간의 프레임을 주고 받을 수 있도록하는 역할
- 특징
  1. 물리계층에서 넘어온 데이터(비트)를 프레임으로 만든다.
  2. 흐름제어: 송수신간의 흐름제어
  3. 오류제어: 프레임 전송시 발생한 오류 프레임을 재전송한다.
  4. Unique MAC 주소 사용 ➡️ 네트워크 카드가 생성될때(고유)

데이터 계층은 OSI 2계층으로 1계층과는 다르게 프레임 전송시 발생한 오류들에 대해서 대응을 하게된다. 
위에서 살펴본 특징을 보면 1계층과 다르게 CRC 기반의 흐름제어와 오류검출이 이루어진다. 간단한 오류 수정은 이루어지지만
완전한 오류 수정은 상위 계층에서 이루어진다.

> 💡 순한 중복 검사 - CRC(Cyclic Redundancy Check) 
>
> 생성과 검증 과정을 나누어서 설명할 수 있다. CRC를 생성하여 프레임을 다항식을 계산하여 끝에 0을 padding한다.
> 이후 검즘과정에서 CRC가 포함되어있는지 확인하기 위해서 다항식을 사용하여 나눗셈을 수행한다. 그리고 나머지가 0일때는
> 오류가 없고 0이 아니면 오류가 발생한다. 계산은 매우 빠르지만, 오류를 수정할 수 없다.
---
## 3계층 - Network Layer(네트워크 계층)
- 데이터 구조: Packet(패킷)
- 장비: 라우터, L3 스위치, Gateway, 방화벽
- 프로토콜: IP, ICMP, IPSec, RIP, DDP, ARP
- 목적: 패킷을 출발지에서 목적지까지 전달하는 역할
- 특징
  1. 경로결정: 데이터 패킷의 최적 경로를 결정
     1. 동적라우팅: 라우팅 프로토콜(RIP, OSPF 등)을 활요하여 경로를 자동으로 업데이트
     2. 정적라우팅: 관리자에 의해서 수동으로 경로 설정
  2. 패킷 전달: 결정된 경로로 전달
     1. IP 주소의 활용 및 IP 주소 체계 활용: 목적지 설정
     2. 패킷 캡슐화
  3. 오류제어: TTL(Time To Live) 및 헤더 체크섬 활용 
  4. 트래픽 제어 및 품질 관리
     1. QoS(Quality of Service): 패킷 우선순위 설정하여 중요한 데이터가 우선적으로 전달되도록 함.
     2. 트래픽 쉐이핑: 네트워크 대역폭을 효율적으로 사용하도록 트래픽 패컨을 조절
  5. 네트워크 분할 및 연결:
     1. 서브네팅(Subnet): 하나의 네크워크를 여러개의 서브넷으로 구분
     > 💡 서브넷(Subnet) & 서브넷 마스크
     >  
     >  서브넷은 네트워크를 더 작은 단위로 분할하여 네트워크관리와 효율성을 높일 수 있다. 서브넷은 서브넷 마스크를 통해서 생성을 할 수 있는데 서브넷 마스크는 네트워크 부분과 호스트 구분해주는 역할을 하게 된다.
     >  서브넷 마스크와 IP주소의 AND연산을 통해 네트워크를 구분할 수 있다.
     2. 라우터: 다른 네크워크를 연결하고, 서로 다른 네트워크 간의 통신을 지원한다.

데이터링크 계층은 OSI 3계층이며 OSI 계층의 꽃[🌹]이라고 볼 수 있다. 패킷부터 시작해서 IP, Subnet, 라우팅까지 어쩌면 가장 많은 기능이
들어가있다고 생각된다. 또한 네트워크간 네트워크 연결은 LAN -> WAN 구조로 나아갈 수 있게 된다는 것이다. WAN 구조가 되면 다른 PC까지 통신이 이루어
진다는 것이다. 연결이 쉽다는 의미는 그만큼 보안이 가장 취약하다는 것을 내포하고 있다. 강력한 보안장비는 방화벽이 L3에 존재하게 된다.
---
## 4계층 - Transport Layer(전송 계층)
- 데이터 구조: Segment(세그먼트)
- 장비: L4 로드벨런서, 프록시 서버
- 프로토콜: TCP, UDP
- 목적: 데이터를 송신자와 수신자 간에 신뢰성 있게 전달하는 역할
- 특징
  1. 신뢰성 있는 데이터 전송
  2. 흐름 제어
  3. 다중화 및 역다중화
  4. 연결 지향성
  
전송 계층은 OSI 4계층이며 현재 많이 사용되고 있는 프로토콜이 존재하는 계층이다. 4계층에서는 syn/ack를 통해 보다
신뢰성 있는 데이터를 전송한다. 또한, Port를 사용하여 IP주소 값에 대문을 하나씩 달아줄 수 있다.  
⭐TCP/UDP를 따로 포스팅을 통해 더 자세히 알아보도록하자.

---
## 5계층 - Session Layer(세션 계층)
- 데이터 구조: Message(메시지)
- 프로토콜: RPC,SCP,PPTP
- 목적: 네트워크 연결의 세션 관리하는 역할
- 특징
  1. 세션 관리
  2. 세션 초기화 및 종료
  3. 동기화 및 동기 제어
  4. 오류 복구

5계층은 Session 계층이다. 세션은 네트워크간 통신이 일정기간동안 유지토록하는 것이다. 대부분 IP:Port 기반으로 동작을 한다.
아마 이 5계층에 대해서 이해를 잘한다면 MSA(Micro Service Architecture)를 이해하기 매우 용이할 것으로 판단된다. 물론 K8S도 말이다.

---
## 6계층 - Presentation Layer(표현 계층)
- 데이터 구조: 이미지, 오디오, 텍스트 형태
- 프로토콜: MIME
- 목적: 데이터를 응용 프로그램이 이해할 수 있는 형식으로 변환하고, 필요한 경우 데이터의 인코딩 및 압축을 수행하여 응용 계층에서 처리할 수 있도록 하는 역할
- 특징
  1. 데이터 인코딩, 압축, 암호화
  2. 멀티미디어 데이터 형식 변환

6계층은 Presentation 계층이다. 이제 데이터들이 인간의 눈에 잘 보이도록 인코딩되었다. 데이터의 정리없이 우리가 이해할 수준으로 올라왔다. 표현계층에서 해야할 일은 이러한 데이터
들을 상위 계충에서 알아먹을 수 있도록 변환하는 것이다.

---
## 7계층 - Application Layer(표현 계층)
- 데이터 구조: 데이터(Data)
- 프로토콜: SMTP, HTTP, FTP, SSH
- 목적: 종 사용자가 네트워크 서비스를 효과적으로 이용할 수 있도록 데이터 통신을 지원하는 역할
- 특징
  1. 사용자 인터페이스 제공
  2. 프로토콜 다양성

마지막, 7계층은 Application 계층이다. 인간이 데이터를 바라보는 것 뿐만아니라 이를 통신 프로그램밍에 맞춰 전송할 수 있도록 되었다는 것이다.
그리고 7계층의 프로코톨은 각 특성에 맞게 변경되었다. 웹은 http, 파일 전송은 ftp, 메일 시스템은 SMTP로 특성화되어서 프로토콜이 만들어져있다.

---
# FINAL
OSI 계층은 관련 과목 시험, 자격 시험, AWS학습, 특히나 면접에서 가장 많이 물어보는 질문 중 하나이다. 3계층 통신 방법은 뭐고
데이터 단위는 무엇이냐, 3계층의 특징은 뭐냐, 심화로 내면 LB는 어디어디 들어갈 수 있고 L4 LB와 L7 LB의 차이가 무엇이고 해당 상황일떄는
어떤 LB가 효율적인가.... 등등 많은 질문을 낼 수 있습니다.  
이번 포스팅에서는 대략적으로 OSI 계층을 학습했지만, 계층별로 살펴보아야할 자료들이 있습니다.
